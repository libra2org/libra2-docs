---
title: "Indexer API Reference"
---

import { Aside } from '@astrojs/starlight/components';

The Indexer API allows you to access rich data about tokens, fungible assets, and accounts on-chain using GraphQL queries. **You can access it [here](/build/indexer/indexer-api).**

For common queries, check out the sidebar for examples to work from. When building your own, this reference guide should help you determine which tables are most relevant, and how to format your queries.

<Aside type="caution">
  Before relying on a table for production services, check the bottom of this page to see if that table is deprecated. If so, use the note section for guidance on what to do to migrate to a non-deprecated table.
</Aside>

<Aside type="note">
  If you are looking up a table with the `_by_pk` suffix, search for the table name without that suffix. `_by_pk` tables are automatically generated for convenience to allow querying by primary key.
</Aside>

<br />

# Indexer Table Reference

<Aside type="note">
  Remember to use Ctrl + F to find the table you are interested in! When in doubt, you may also want to query the Hasura tables linked in the [Indexer API Access](/build/indexer/indexer-api) page to see examples of the data inside.
</Aside>

## Filtering (with `where` clauses)

To ensure your queries filter data efficiently, check out the available indexes for each table.
Some indexes are composite B-tree indexes, meaning they consist of multiple columns.
B-tree indexes are ordered and perform optimally when queries utilize a left-most prefix of the indexed columns.

{/* Indexed columns are generated from https://docs.google.com/spreadsheets/d/1sQnMimoJnP5sVaLCCRK4H6AHXGCwsehAuBF9AD_0IyY/edit?gid=47194642#gid=47194642 */}

## General

### `user_transactions`

Transactions filtered to user\_transactions (not system).

| Index Name                                   | Indexed Columns         |
| -------------------------------------------- | ----------------------- |
| user\_transactions\_pkey                       | version                 |
| user\_transactions\_sender\_sequence\_number\_key | sender, sequence\_number |
| ut\_epoch\_index                               | epoch                   |
| ut\_insat\_index                               | inserted\_at             |
| ut\_sender\_seq\_index                          | sender, sequence\_number |

### `block_metadata_transactions`

A type of system transaction emitted once per block, useful for mapping to timestamp or epoch.

| Index Name                                   | Indexed Columns |
| -------------------------------------------- | --------------- |
| block\_metadata\_transactions\_block\_height\_key | block\_height    |
| block\_metadata\_transactions\_pkey             | version         |
| bmt\_insat\_index                              | inserted\_at     |

### `account_transactions`

_Has an aggregate view for summary data called `account_transactions_aggregate`_

| Index Name                | Indexed Columns                      |
| ------------------------- | ------------------------------------ |
| account\_transactions\_pkey | account\_address, transaction\_version |
| at\_insat\_index            | inserted\_at                          |
| at\_version\_index          | transaction\_version DESC             |

This table maps accounts and transactions that interact with that account.

| Field                         | Type    | Primary Key | Description                                                                                                                                       |
| ----------------------------- | ------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| delegated\_staking\_activities  | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| fungible\_asset\_activities     | Join    |             | References [fungible\_asset\_activities](#fungible_asset_activities).                                                                               |
| token\_activities              | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| token\_activities\_aggregate    | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| token\_activities\_v2           | Join    |             | References [token\_activities\_v2](#token_activities_v2).                                                                                           |
| token\_activities\_v2\_aggregate | Join    |             | References [token\_activities\_v2](#token_activities_v2).                                                                                           |
| account\_address               | String! | Yes         | This is an Libra account address. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a"                              |
| transaction\_version           | bigint! | Yes         | Blockchain version of the transaction. Ex. 10000000                                                                                               |

### `ledger_infos`

This table shares what chain is currently being queried.

| Field    | Type | Primary Key | Description                                                                                       |
| -------- | ---- | ----------- | ------------------------------------------------------------------------------------------------- |
| chain\_id | int  | Yes         | The unique identifier for the chain you are accessing. Ex. 1 (for Mainnet), 2 (for Testnet), etc. |

### `processor_status`

This table shares how current this processor's data is.

gives you latest version processed per “processor”

| Field                      | Type   | Primary Key | Description                                                                                             |
| -------------------------- | ------ | ----------- | ------------------------------------------------------------------------------------------------------- |
| last\_success\_version       | bigint | Yes         | The version number of the last successful processor run. Ex. 5000000                                    |
| last\_transaction\_timestamp | String |             | Timestamp of the last processed transaction. Ex. "2024-04-17T02:14:25.68771"                  |
| last\_updated               | String |             | Timestamp of the last update to this processor's status. Ex. "2024-04-17T02:14:25.68771" |
| processor                  | String | Yes         | Name of the processor. Ex. "transaction\_processor"                                            |

## NFT

### `token_activities_v2`

_Has an aggregate view for summary data called `token_activities_v2_aggregate`_

| Index Name               | Indexed Columns                  |
| ------------------------ | -------------------------------- |
| ta2\_from\_type\_index      | from\_address, type               |
| ta2\_insat\_index          | inserted\_at                      |
| ta2\_owner\_type\_index     | event\_account\_address, type      |
| ta2\_tid\_index            | token\_data\_id                    |
| ta2\_to\_type\_index        | to\_address, type                 |
| token\_activities\_v2\_pkey | transaction\_version, event\_index |

This table tracks token activities and is especially useful for tracking NFT activity. This includes both v1 and v2 data.

| Field                      | Type    | Primary Key | Description                                                                                                                                                                                                                                                                                                            |
| -------------------------- | ------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| aptos\_names\_from           | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields.                                                                                                                                                                      |
| aptos\_names\_from\_aggregate | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields.                                                                                                                                                                      |
| aptos\_names\_to             | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields.                                                                                                                                                                      |
| aptos\_names\_to\_aggregate   | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields.                                                                                                                                                                      |
| current\_token\_data         | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields.                                                                                                                                                                      |
| after\_value                | String  |             | The value of a token property after the transaction. Ex. "100"                                                                                                                                                                                                                                               |
| before\_value               | String  |             | The value of a token property before the transaction. Ex. "50"                                                                                                                                                                                                                                               |
| entry\_function\_id\_str      | String  |             | The identifier of the function called in this transaction. Ex. "0x1::aptos\_account::transfer"                                                                                                                                                                                                                |
| event\_account\_address      | String  |             | This is an Libra account address related to the event. This address must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a"                                                                                                             |
| event\_index                | bigint  | Yes         | Index of the event within the transaction. Ex. 1                                                                                                                                                                                                                                                                       |
| from\_address               | String  |             | This is an Libra account address from which the token was sent. This address must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a"                                                                                                    |
| is\_fungible\_v2             | Boolean |             | Indicates whether the token is fungible. Soon to be deprecated. Ex. False for NFTs.                                                                                                                                                                                                                                    |
| property\_version\_v1        | bigint  |             | The version of the token's properties under schema version 1. This field is only for token standard v1. It is always 0 for v2. Ex. 0                                                                                                                                                                              |
| to\_address                 | String  |             | This is an Libra account address to which the token was sent. This address must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a"                                                                                                      |
| token\_amount               | bigint  |             | The amount of the token transferred in this activity. Ex. 3                                                                                                                                                                                                                                                            |
| token\_data\_id              | String  |             | Unique identifier for this particular token's data. For token standard v1, this is derived from a combination of creator\_address, collection\_name, and token\_name. This ID must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a" |
| token\_standard             | String  |             | Libra standard that the collection adheres to. Ex. "v1"                                                                                                                                                                                                                                                      |
| transaction\_timestamp      | String  |             | Timestamp when the transaction occurred. Ex. "2024-04-17T02:14:25.68771"                                                                                                                                                                                                                                     |
| transaction\_version        | bigint  | Yes         | Blockchain version of the transaction. Ex. 10000000                                                                                                                                                                                                                                                                    |
| type                       | String  |             | Type of transfer - like "deposit" or "withdrawal". Ex. "0x3::token::DepositEvent"                                                                                                                                                                                                        |

### `nft_metadata_crawler_parsed_asset_uris`

This table allows you to look up the cdn and uris for NFT images / content.

| Field                           | Type   | Primary Key | Description                                                                                                |
| ------------------------------- | ------ | ----------- | ---------------------------------------------------------------------------------------------------------- |
| animation\_optimizer\_retry\_count | Int    |             | Number of retries to optimize animation. Ex. 3                                                             |
| asset\_uri                       | String | Yes         | URI of the asset. Ex. "https://example.com/nft/123"                                              |
| cdn\_animation\_uri               | String |             | Content Delivery Network URI for animation. Ex. "https://cdn.example.com/animations/123"         |
| cdn\_image\_uri                   | String |             | Content Delivery Network URI for image. Ex. "https://cdn.example.com/images/123"                 |
| cdn\_json\_uri                    | String |             | Content Delivery Network URI for JSON metadata. Ex. "https://cdn.example.com/metadata/123.json"  |
| raw\_animation\_uri               | String |             | Original URI for animation before CDN optimization. Ex. "https://example.com/raw/animations/123" |
| raw\_image\_uri                   | String |             | Original URI for image before CDN optimization. Ex. "https://example.com/raw/images/123"         |

| Index Name             | Indexed Columns   |
| ---------------------- | ----------------- |
| nft\_inserted\_at        | inserted\_at       |
| nft\_raw\_animation\_uri  | raw\_animation\_uri |
| nft\_raw\_image\_uri      | raw\_image\_uri     |
| parsed\_asset\_uris\_pkey | asset\_uri         |

### `current_token_ownerships_v2`

_Has an aggregate view for summary data called `current_token_ownerships_v2_aggregate`_

This table tracks who owns which NFTs. This includes both v1 and v2 tokens. Fungible tokens are not tracked as consistently.

| Field                       | Type    | Primary Key | Description                                                                                                                                                                                          |
| --------------------------- | ------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| composed\_nfts\_aggregate     | Join    |             | Aggregate information about the composed NFTs, such as count or other statistics.                                                                                                                    |
| current\_token\_data          | Join    |             | Detailed information about the token's current data; structure is defined in a related table.                                                                                                   |
| amount                      | bigint  |             | The amount of the token owned. Example: 1 for an NFT.                                                                                                                                                |
| composed\_nfts               | Array   |             | An array containing the IDs of NFTs that compose this token, if applicable.                                                                                                                          |
| is\_fungible\_v2              | Boolean |             | Indicates whether the token is fungible. Example: true or null                                                                                                                                       |
| is\_soulbound\_v2             | Boolean |             | Indicates whether the token is soulbound (non-transferable once owned). Example: true or null                                                                                                        |
| last\_transaction\_timestamp  | String  |             | Timestamp of the last transaction involving the token. Example: "2024-04-17T02:14:25.68771"                                                                                                |
| last\_transaction\_version    | bigint  |             | The version number of the last transaction involving the token. Example: 20747031                                                                                                                    |
| non\_transferrable\_by\_owner  | Boolean |             | Indicates whether the token is non-transferrable by the owner. Example: true or null                                                                                                                 |
| owner\_address               | String  | Yes         | The Libra account address that currently owns the token. Addresses must be 66 characters so may be 0 padded. Example: "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b89" |
| property\_version\_v1         | bigint  | Yes         | The version number of the token's properties as of the last update. This field is only for token standard v1. It is always 0 for v2. Example: 0                                                 |
| storage\_id                  | String  | Yes         | A unique identifier used for storage purposes. IDs must be 66 characters long, so may be 0 padded. Ex. "0xd8d41ff9f67d17d7dee061b5b683b92013b420cb6a30c21fc7c287454792d7a8"                |
| table\_type\_v1               | String  |             | The Move function type. Example: "0x3::token::TokenStore"                                                                                                                                  |
| token\_data\_id               | String  | Yes         | A unique identifier for the token data, typically a hash or a numeric ID. Ex. "0x3d911af2dc3e47848fbba17b8694cf526942be183b84f8393a6c048232fb976d"                                         |
| token\_properties\_mutated\_v1 | Object  |             | Properties of the token that have been mutated from the original. Often in JSON or similar format. Example: { }                                                                                      |
| token\_standard              | String  |             | The standard used to generate this token. Ex. "v1" or "v2"                                                                                                                       |

| Index Name                       | Indexed Columns                                               |
| -------------------------------- | ------------------------------------------------------------- |
| curr\_to2\_insat\_index             | inserted\_at                                                   |
| curr\_to2\_owner\_index             | owner\_address                                                 |
| curr\_to2\_wa\_index                | storage\_id                                                    |
| current\_token\_ownerships\_v2\_pkey | token\_data\_id, property\_version\_v1, owner\_address, storage\_id |

### `current_token_datas_v2`

This table tracks the metadata associated with each NFT (Ex. URI, supply, etc.). This tracks both v1 and v2 tokens.

| Field                              | Type    | Primary Key | Description                                                                                                                                       |
| ---------------------------------- | ------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| cdn\_asset\_uris                     | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| current\_collection                 | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| current\_token\_ownerships           | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| current\_token\_ownerships\_aggregate | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| aptos\_name                         | String  |             | This is a name tied to this token using the Libra Name Service (ANS). Ex. "EpicDragon"                                                  |
| collection\_id                      | String  | Yes         | Identifier for the collection that includes this token. Ex. "0x360f6eeabb4d7a9d2fab1f35b01e02831e3b5c4b73c7fd6c98dcc1c301c817c8"        |
| decimals                           | bigint  |             | Number of decimal places for token value, typically for fungible tokens. Ex. 18                                                                   |
| description                        | String  |             | Description of the token. Ex. "A legendary dragon from the mystical lands."                                                             |
| is\_fungible\_v2                     | Boolean |             | Whether the token is fungible. Ex. False for NFTs                                                                                                 |
| largest\_property\_version\_v1        | bigint  |             | The largest version number of the token's properties under the first schema. Ex. 1                                                           |
| last\_transaction\_timestamp         | bigint  |             | Unix timestamp of the last transaction involving this token. Ex. 2024-03-27T07:41:58.800893                                                       |
| last\_transaction\_version           | bigint  |             | Blockchain version of the last transaction involving this token. Ex. 30000000                                                                     |
| maximum                            | bigint  |             | Maximum possible quantity of this token, relevant for fungibles. Ex. 1000000                                                                      |
| supply                             | bigint  |             | Current supply of the token in circulation. Ex. 500000                                                                                            |
| token\_data\_id                      | String  |             | Unique identifier for the token's data. Ex. "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b89"                   |
| token\_name                         | String  |             | The formal name of the token. Ex. "Mystic Dragon"                                                                                       |
| token\_properties                   | Object  |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields. |
| token\_standard                     | String  |             | Libra standard that the collection adheres to. Ex. "v1"                                                                                 |
| token\_uri                          | String  |             | URI linking to further information about the token. Ex. "https://example.com/tokens/987654321"                                          |

| Index Name                  | Indexed Columns           |
| --------------------------- | ------------------------- |
| cur\_td2\_cid\_name\_index      | collection\_id, token\_name |
| cur\_td2\_insat\_index         | inserted\_at               |
| current\_token\_datas\_v2\_pkey | token\_data\_id             |

### `current_collections_v2`

This table tracks the metadata associated with each NFT collection (Ex. collection\_id, creator\_address, etc.). This tracks both v1 and v2 tokens.

| Field                      | Type    | Primary Key | Description                                                                                                                                                                                                    |
| -------------------------- | ------- | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| cdn\_asset\_uris             | Join    |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields.                                                              |
| collection\_id              | String  | Yes         | Unique identifier for the collection. IDs must be 66 characters long, and so may be 0 padded. Ex. "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b88"                               |
| collection\_name            | String  |             | The formal name of the collection. Ex. "Mythic Dragons"                                                                                                                                              |
| creator\_address            | String  |             | This is an Libra account address that created the collection. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a" |
| current\_supply             | bigint  |             | Current supply of tokens in this collection. Ex. 500                                                                                                                                                           |
| description                | String  |             | Description of the collection. Ex. "A collection of rare digital dragons."                                                                                                                           |
| last\_transaction\_timestamp | String  |             | Timestamp of the last transaction involving this collection. Ex. "2024-04-17T02:14:25.68771"                                                                                                         |
| last\_transaction\_version   | bigint  |             | Blockchain version of the last transaction involving this collection. Ex. 3000000002                                                                                                                           |
| max\_supply                 | bigint  |             | Maximum possible quantity of tokens in this collection. If the max supply is 0, there is no limit on the supply. Ex. 1000                                                                                      |
| mutable\_description        | String  |             | Changeable description of the collection. Ex. "Updated collection description."                                                                                                                      |
| mutable\_uri                | Boolean |             | True if the uri is changeable by the creator. Ex. True                                                                                                                                                         |
| table\_handle\_v1            | String  |             | Legacy identifier handle for the collection in earlier schema versions. Ex. "handle\_12345"                                                                                                           |
| token\_standard             | String  |             | Libra standard that the collection adheres to. Ex. "v1"                                                                                                                                              |
| total\_minted\_v2            | bigint  |             | Total number of tokens minted in this collection under schema version 2. Ex. 800                                                                                                                               |
| uri                        | String  |             | This is a URI to  where the image live. This can also be JSON data. Ex. "https://example.com/collections/9876543210"                                                                                 |

| Index Name                  | Indexed Columns                  |
| --------------------------- | -------------------------------- |
| cur\_col2\_crea\_cn\_index      | creator\_address, collection\_name |
| cur\_col2\_insat\_index        | inserted\_at                      |
| current\_collections\_v2\_pkey | collection\_id                    |

### `current_collection_ownership_v2_view`

_Has an aggregate view for summary data called `current_collection_ownership_v2_view_aggregate`_

This table maps collections to who owns them and helps count how much of a collection is owned by other accounts.

| Field                    | Type   | Primary Key | Description                                                                                                                                                                                                      |
| ------------------------ | ------ | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| current\_collection       | Join   |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see these sub-fields.                                                                |
| collection\_id            | String | Yes         | Unique identifier for the collection. IDs must be 66 characters long, and so may be 0 padded. Ex. "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b89"                                 |
| collection\_name          | String |             | The formal name of the collection. Ex. "Mythic Dragons"                                                                                                                                                |
| collection\_uri           | String |             | URI linking to further information about the collection. Ex. "https://example.com/collections/9876543210"                                                                                              |
| creator\_address          | String |             | This is an Libra account address that created the collection. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a"   |
| distinct\_tokens          | bigint |             | The count of distinct tokens owned within this collection. Ex. 150                                                                                                                                               |
| last\_transaction\_version | bigint |             | The version number of the last transaction involving this collection. Ex. 3000000002                                                                                                                             |
| owner\_address            | String | Yes         | This is an Libra account address that currently owns the token. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a" |
| single\_token\_uri         | String |             | URI linking to information about a specific token within the collection. Ex. "https://example.com/tokens/9876543210"                                                                                   |
| token\_standard           | String |             | Libra standard that the collection adheres to. Ex. "v1"                                                                                                                                                |

## Fungible Assets

### `fungible_asset_metadata`

This tracks the metadata tied to each fungible asset (ex. decimals of precision). It includes v1 token data. This is a current\_ table.

| Field                             | Type   | Primary Key | Description                                                                                                                                                                                               |
| --------------------------------- | ------ | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| asset\_type                        | String | Yes         | The type of the asset, described by a Move resource. Ex. "0x1::aptos\_coin::LibraCoin"                                                                                                           |
| creator\_address                   | String |             | This is an Libra account address that created the asset. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a" |
| decimals                          | bigint |             | Number of decimal places for token value, typically for fungible tokens. Ex. 18                                                                                                                           |
| icon\_uri                          | String |             | URI for the icon of the asset. Ex. "https://cdn.example.com/icons/123"                                                                                                                          |
| last\_transaction\_timestamp        | String |             | Timestamp of the last transaction involving this asset. Ex. "2024-04-17T02:14:25.68771"                                                                                                         |
| last\_transaction\_version          | bigint |             | Blockchain version of the last transaction involving this asset. Ex. 10000000                                                                                                                             |
| name                              | String |             | The formal name of the asset. Ex. "Digital Gold"                                                                                                                                                |
| project\_uri                       | String |             | URI linking to the project information associated with this asset. Ex. "https://www.example.com/project\_name/"                                                                                  |
| supply\_aggregator\_table\_handle\_v1 | String |             | Legacy handle for the supply aggregator table from an earlier schema version. Ex. "handle\_67890"                                                                                                |
| supply\_aggregator\_table\_key\_v1    | String |             | Legacy key for accessing the supply aggregator table in earlier schema versions. Ex. "key\_12345"                                                                                                |
| symbol                            | String |             | The trading symbol of the asset. Ex. "DGOLD"                                                                                                                                                    |
| token\_standard                    | String |             | Standard that the asset adheres to. Ex. "v1"                                                                                                                                                    |

| Index Name                   | Indexed Columns |
| ---------------------------- | --------------- |
| fam\_creator\_index            | creator\_address |
| fam\_insat\_index              | inserted\_at     |
| fungible\_asset\_metadata\_pkey | asset\_type      |

### `fungible_asset_activities`

This tracks the activity of fungible assets. It includes v1 token data.

| Field                       | Type    | Primary Key | Description                                                                                                                                                                                                                  |
| --------------------------- | ------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| owner\_aptos\_names           | Join    |             | References [owner\_aptos\_names](#current_aptos_names).                                                                                                                                                                        |
| owner\_aptos\_names\_aggregate | Join    |             | References [owner\_aptos\_names](#current_aptos_names).                                                                                                                                                                        |
| amount                      | bigint  |             | The amount of the asset involved in the activity. Ex. 1000                                                                                                                                                                   |
| asset\_type                  | String  | Yes         | The type of the asset, described by a Move resource. For fungible assets, this will be the address of the metadata object. Ex. "0x1::aptos\_coin::LibraCoin"                                                        |
| block\_height                | bigint  |             | The blockchain id at which this activity occurred. Ex. 1500000                                                                                                                                                               |
| entry\_function\_id\_str       | String  |             | The identifier of the function called in this transaction. Ex. "0x1::aptos\_account::transfer"                                                                                                                      |
| event\_index                 | bigint  |             | Index of the event within the transaction. Ex. 1                                                                                                                                                                             |
| gas\_fee\_payer\_address       | String  |             | This is an Libra account address that paid the gas fee for the transaction. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a" |
| is\_frozen                   | Boolean |             | True if this activity is a freeze asset activity. Ex. null                                                                                                                                                                   |
| is\_gas\_fee                  | Boolean |             | Indicates whether this activity involved a gas fee. Ex. True                                                                                                                                                                 |
| is\_transaction\_success      | Boolean |             | Indicates whether the transaction was successful. Ex. True                                                                                                                                                                   |
| metadata                    | Object  |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see fields for `metadata` in this table.                                                         |
| owner\_address               | String  |             | This is an Libra account address that owns the asset. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b89"                       |
| storage\_id                  | String  |             | Identifier for the storage used in the transaction. IDs must be 66 characters long, and so may be 0 padded. Ex. "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b89"                               |
| storage\_refund\_amount       | bigint  |             | Amount refunded for storage after the transaction. This is always in APT [octas](/network/glossary#Octa). Ex. 50                                                                                                         |
| token\_standard              | String  |             | Libra standard that the collection adheres to. Ex. "v1"                                                                                                                                                            |
| transaction\_timestamp       | String  |             | Timestamp when the transaction occurred. Ex. "2024-04-17T02:14:25.68771"                                                                                                                                           |
| transaction\_version         | bigint  |             | Blockchain version of the transaction. Ex. 2                                                                                                                                                                                 |
| type                        | String  |             | Type of the transaction, described by a Move entry function. Ex. "0x1::coin::WithdrawEvent"                                                                                                                        |

| Index Name                     | Indexed Columns                  |
| ------------------------------ | -------------------------------- |
| faa\_at\_index                   | asset\_type                       |
| faa\_gfpa\_index                 | gas\_fee\_payer\_address            |
| faa\_insat\_idx                  | inserted\_at                      |
| faa\_owner\_type\_index           | owner\_address, type              |
| faa\_si\_index                   | storage\_id                       |
| fungible\_asset\_activities\_pkey | transaction\_version, event\_index |

### `current_fungible_asset_balances`

_Has an aggregate view for summary data called `current_fungible_asset_balances_aggregate`_

This tracks the asset balances of each account on-chain. It includes v1 token data.

| Field                      | Type    | Primary Key | Description                                                                                                                                                                                                                              |
| -------------------------- | ------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| amount                     | bigint  |             | The amount of the asset owned. Ex. 2000                                                                                                                                                                                                  |
| asset\_type                 | String  |             | The type of the asset, described by a Move resource. For v2 tokens this is the address of the fungible asset metadata object. For v1 it's the fully qualified path of the move resource. Ex. "0x1::aptos\_coin::LibraCoin" |
| is\_frozen                  | Boolean |             | Indicates whether the account is frozen. Ex. False                                                                                                                                                                                       |
| is\_primary                 | Boolean |             | Indicates whether this is the primary balance of the owner. Ex. True                                                                                                                                                                     |
| last\_transaction\_timestamp | String  |             | Timestamp of the last transaction involving this balance. Ex. "2024-04-17T02:14:25.68771"                                                                                                                                      |
| last\_transaction\_version   | bigint  |             | Blockchain version of the last transaction involving this balance. Ex. 30000000                                                                                                                                                          |
| metadata                   | Object  |             | Use the [Hasura explorer](https://cloud.hasura.io/public/graphiql?endpoint=https://api.mainnet.aptoslabs.com/v1/graphql) to see fields for `metadata` in `current_fungible_asset_balances`.                                              |
| owner\_address              | String  |             | This is an Libra account address that owns the asset. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b89"                                   |
| storage\_id                 | String  | Yes         | Identifier for the storage associated with this balance. IDs must be 66 characters long, and so may be 0 padded. Ex. "0xa815a9a09105973084bfc31530e7c8f002846787c2f0521e1e34dc144ad83b89"                                      |
| token\_standard             | String  |             | Libra standard that the collection adheres to. Ex. "v1"                                                                                                                                                                        |

| Index Name                                   | Indexed Columns           |
| -------------------------------------------- | ------------------------- |
| cufab\_insat\_index                            | inserted\_at               |
| cufab\_owner\_at\_index                         | owner\_address, asset\_type |
| current\_unified\_fungible\_asset\_balances\_pkey | storage\_id                |

## Delegated Staking

With [AIP-6](https://github.com/aptos-foundation/AIPs/blob/main/aips/aip-6.md) we added the ability for staking pools to be formed with delegated funds (delegation pools). Once these pools hold over 1M APT, they can become a staking pool (validator node).

### `current_delegated_staking_pool_balances`

This table tracks the current balances of each account in a delegated staking pool.

| Field                        | Type   | Primary Key | Description                                                                 |
|------------------------------|--------|-------------|-----------------------------------------------------------------------------|
| staking\_pool\_address         | String | Yes         | The address of the delegation pool. |
| total\_coins                  | bigint |             | Amount of APT in the staking pool.                              |
| total\_shares                 | bigint |             | The total number of shares in the delegation pool. |
| operator\_commission\_percentage | bigint |          | The commission percentage taken by the staking pool operator.                 |
| inactive\_table\_handle        | String |             | The table handle for the inactive table.                                    |
| active\_table\_handle          | String |             | The table handle for the active table.                                      |
| last\_transaction\_version     | int8   |             | Transaction version (identifier) for the last transaction involving this staking pool. |
| inserted\_at                  | String |             | The timestamp when the record was inserted.                                 |

| Index Name | Indexed Columns |
|------------|----------------|
| current\_delegated\_staking\_pool\_balances\_pkey | staking\_pool\_address |

### `current_delegated_voter`

This table tracks the current delegated voters of a delegation pool.

| Field                      | Type   | Primary Key | Description |
|----------------------------|--------|-------------|-------------|
| delegation\_pool\_address    | String | Yes         | The address of the delegation pool. |
| delegator\_address          | String | Yes         | The address of the delegator. |
| table\_handle               | String |             | The table handle tracking this position. |
| voter                      | String |             | The address of the current voter in the delegation pool. |
| pending\_voter              | String |             | The address of the pending voter awaiting confirmation. |
| last\_transaction\_version   | bigint |             | The transaction version (identifier) of the last transaction involving this delegation. |
| last\_transaction\_timestamp | Timestamp |          | The block timestamp of the last transaction involving this delegation. |
| inserted\_at                | Timestamp |          | The timestamp when the record was inserted into the database. |

| Index Name | Indexed Columns |
|------------|----------------|
| current\_delegated\_voter\_pkey | delegation\_pool\_address, delegator\_address |
| cdv\_da\_index | delegator\_address |

### `current_delegator_balances`

This table tracks the current balances of each account in a delegated staking pool.

| Field                    | Type   | Primary Key | Description |
|----------------------------|--------|-------------|-------------|
| delegator\_address          | String | Yes            | The address of the delegator.            |
| pool\_address               | String |             | The address of the delegator pool.            |
| pool\_type                | String |             | If the shares are active or inactive |
| table\_handle             | String |             | The table handle for the pool. |
| shares                   | bigint |             | The number of shares in the pool. |
| parent\_table\_handle      | String |             | The table handle for the parent table. |
| last\_transaction\_version     | bigint   |             | Transaction version (identifier) for the last transaction involving this staking pool. |
| inserted\_at              | Timestamp |             | The timestamp when the record was inserted. |

| Index Name | Indexed Columns |
|------------|----------------|
| current\_delegator\_balances\_pkey | delegator\_address, pool\_address, pool\_type, table\_handle |

### `current_staking_pool_voter`

This table tracks the current voters of a staking pool.

| Field                    | Type   | Primary Key | Description |
|----------------------------|--------|-------------|-------------|
| staking\_pool\_address       | String | Yes            | The address of the staking pool.            |
| voter\_address              | String |             | The address of the voter.            |
| operator\_address         | String |             | The address of the operator. |
| last\_transaction\_version     | bigint   |             | Transaction version (identifier) for the last transaction involving this staking pool. |
| inserted\_at              | Timestamp |             | The timestamp when the record was inserted. |

| Index Name | Indexed Columns |
|------------|----------------|
| current\_staking\_pool\_voter\_pkey | staking\_pool\_address |
| ctpv\_va\_index | voter\_address |
| ctpv\_insat\_index | inserted\_at |

### `delegated_staking_activities`

This table tracks delegated staking events.

| Field                    | Type   | Primary Key | Description |
|----------------------------|--------|-------------|-------------|
| transaction\_version     | bigint   |             | Transaction version (identifier) for activity |
| event\_index              | bigint |             | The index of the event. Ex. 1 |
| delegator\_address        | String |             | The address of the delegator.            |
| pool\_address             | String |             | The address of the pool.            |
| event\_type               | String |             | DistributeRewards, AddStake, UnlikeStake, ReactiveStake, WithdrawStake |
| amount                   | bigint |             | The amount being staked. Ex. 1000 |
| inserted\_at              | Timestamp |             | The timestamp when the record was inserted. |

| Index Name | Indexed Columns |
|------------|----------------|
| delegated\_staking\_activities\_pkey | transaction\_version, event\_index |
| dsa\_pa\_da\_index | pool\_address, delegator\_address, transaction\_version, event\_index |
| dsa\_insat\_index | inserted\_at |

### `delegated_staking_pool_balances`

This table tracks the historical balances of each account in a delegated staking pool.

| Field                    | Type   | Primary Key | Description |
|----------------------------|--------|-------------|-------------|
| transaction\_version        | bigint |             | Transaction version (identifier) for activity |
| staking\_pool\_address       | String |             | The address of the delegation pool. |
| total\_coins                  | bigint |             | Amount of APT in the staking pool. |
| total\_shares                 | bigint |             | The total number of shares in the delegation pool. |
| operator\_commission\_percentage | bigint |             | The commission percentage taken by the staking pool operator. |
| inactive\_table\_handle        | String |             | The table handle for the inactive table. |
| active\_table\_handle          | String |             | The table handle for the active table. |
| inserted\_at                  | String |             | The timestamp when the record was inserted. |

| Index Name | Indexed Columns |
|------------|----------------|
| delegated\_staking\_pool\_balances\_pkey | transaction\_version, staking\_pool\_address |

### `delegated_staking_pools`

This table tracks when a delegated pool was created.

| Field                    | Type   | Primary Key | Description |
|----------------------------|--------|-------------|-------------|
| staking\_pool\_address       | String |             | The address of the staking pool. |
| first\_transaction\_version  | bigint |             | The version number of the first transaction involving this pool. Ex. 5000000 |
| inserted\_at                | Timestamp |             | The timestamp when the record was inserted. |

| Index Name | Indexed Columns |
|------------|----------------|
| delegated\_staking\_pools\_pkey | staking\_pool\_address |

### `delegator_balances`

This table tracks the historical balances of each account in a delegation pool.

| Field                    | Type   | Primary Key | Description |
|----------------------------|--------|-------------|-------------|
| transaction\_version        | bigint |             | The version number of the transaction. Ex. 5000000 |
| write\_set\_change\_index     | bigint |             | The index of the write set change. Ex. 1 |
| delegator\_address          | String |             | The address of the delegator.            |
| pool\_address               | String |             | The address of the delegator pool.            |
| pool\_type                | String |             | The type of the pool. Ex. "delegated" |
| table\_handle             | String |             | The table handle for the pool. |
| shares                   | bigint |             | The number of shares in the pool. |
| parent\_table\_handle      | String |             | The table handle for the parent table. |
| inserted\_at              | Timestamp |             | The timestamp when the record was inserted. |

| Index Name | Indexed Columns |
|------------|----------------|
| delegator\_balances\_pkey | transaction\_version, write\_set\_change\_index |

## Libra Naming Service (ANS)

### `current_aptos_names`

_Has an aggregate view for summary data called `current_aptos_names_aggregate`_

This view of [`current_ans_lookup_v2`](#current_ans_lookup_v2) helps query by name instead of account.

| Field                    | Type    | Primary Key | Description                                                                                                                                                                                                 |
| ------------------------ | ------- | ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| domain                   | String  |             | The domain associated with this Libra name. Ex. "example.crypto"                                                                                                                                  |
| domain\_with\_suffix       | String  |             | The full domain name including any suffix. Ex. "example.crypto.aptos"                                                                                                                             |
| expiration\_timestamp     | String  |             | Timestamp when the domain registration expires. Ex. "2024-04-17T02:14:25.68771"                                                                                                                   |
| is\_active                | Boolean |             | Indicates whether the domain is currently active. Ex. True                                                                                                                                                  |
| is\_domain\_owner          | Boolean |             | Indicates whether the registered address is the owner of the domain. Ex. False                                                                                                                              |
| is\_primary               | Boolean |             | Indicates whether this is the primary domain for the registered address. Ex. True                                                                                                                           |
| last\_transaction\_version | bigint  |             | The version number of the last transaction involving this domain. Ex. 5000000                                                                                                                               |
| owner\_address            | String  |             | This is an Libra account address that owns the domain. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x123abc456def7890abcdef1234567890abcdef1234"                           |
| registered\_address       | String  |             | This is an Libra account address registered to the domain. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a" |
| subdomain                | String  |             | Any subdomain part of the domain name. Ex. "sub.example"                                                                                                                                          |
| token\_name               | String  |             | The name of the token associated with this domain. Ex. "ExampleToken"                                                                                                                             |
| token\_standard           | String  |             | Libra standard that the collection adheres to. Ex. "v1"                                                                                                                                           |

### `current_ans_lookup_v2`

This table maps tokens, standards, and addresses to human readable names.

| Field                    | Type    | Primary Key | Description                                                                                                                                                                                                 |
| ------------------------ | ------- | ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| domain                   | String  | Yes         | The domain associated with this Libra name. Ex. "example.crypto"                                                                                                                                  |
| expiration\_timestamp     | String  |             | Timestamp when the domain registration expires. Ex. "2024-04-17T02:14:25.68771"                                                                                                                   |
| is\_deleted               | Boolean |             | Indicates whether the domain registration has been deleted. Ex. False                                                                                                                                       |
| last\_transaction\_version | bigint  |             | The version number of the last transaction involving this domain. Ex. 5000000                                                                                                                               |
| registered\_address       | String  |             | This is an Libra account address registered to the domain. Addresses must be 66 characters long, and so may be 0 padded. Ex. "0x50bc83f01d48ab3b9c00048542332201ab9cbbea61bda5f48bf81dc506caa78a" |
| subdomain                | String  | Yes         | Any subdomain part of the domain name. Ex. "sub.example"                                                                                                                                          |
| token\_name               | String  |             | The name of the token associated with this domain. Ex. "ExampleToken"                                                                                                                             |
| token\_standard           | String  | Yes         | Libra standard that the collection adheres to. Ex. "v1"                                                                                                                                           |

| Index Name                 | Indexed Columns                   |
| -------------------------- | --------------------------------- |
| ans\_v2\_et\_index            | expiration\_timestamp              |
| ans\_v2\_insat\_index         | inserted\_at                       |
| ans\_v2\_ra\_index            | registered\_address                |
| ans\_v2\_tn\_index            | token\_name, token\_standard        |
| current\_ans\_lookup\_v2\_pkey | domain, subdomain, token\_standard |

## Deprecated Tables

The following tables are planned for deprecation, or are already deprecated. See the notes section for any direct replacements or notes on how to migrate if you currently depend on one of these tables. Please do not use any of the below tables for production services.

| Table                               | Notes                                                                                                                                                           |
| ----------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| address\_version\_from\_move\_resources | Replace with account\_transactions                                                                                                                               |
| address\_events\_summary              | To query custom events, you should create a [No-Code Indexer](https://build.aptoslabs.com/docs/no-code-indexing)                                                |
| address\_version\_from\_events         | To query custom events, you should create a [No-Code Indexer](https://build.aptoslabs.com/docs/no-code-indexing)                                                |
| coin\_activities                     | Replace with fungible\_asset\_activities                                                                                                                          |
| coin\_balances                       | Replace with current\_fungible\_asset\_balances                                                                                                                    |
| coin\_infos                          | Replace with fungible\_asset\_metadata                                                                                                                            |
| coin\_supply                         | No replacement; non-realtime APT coin supply is available with this [query](https://github.com/libra2org/explorer/blob/main/analytics/apt_supply.sql)          |
| collection\_datas                    | Replace with current\_collections\_v2                                                                                                                             |
| current\_ans\_lookup                  | Replace with current\_ans\_lookup\_v2                                                                                                                              |
| current\_coin\_balances               | Replace with current\_fungible\_asset\_balances                                                                                                                    |
| current\_collection\_datas            | Replace with current\_collections\_v2                                                                                                                             |
| current\_token\_datas                 | Replace with current\_token\_datas\_v2                                                                                                                             |
| current\_token\_ownerships            | Replace with current\_token\_ownerships\_v2                                                                                                                        |
| events\_view                         | To query custom events, you should create a [No-Code Indexer](https://build.aptoslabs.com/docs/no-code-indexing)                                                |
| move\_resources                      | Replace with account\_transactions                                                                                                                               |
| move\_resources\_view                 | Replace with account\_transactions                                                                                                                               |
| nft\_marketplace\_v2\_\*                | Replace with [NFT Aggregator API](/build/indexer/nft-aggregator)                                                                            |
| token\_activities                    | Replace with token\_activities\_v2                                                                                                                                |
| token\_datas                         | Replace with current\_token\_datas\_v2                                                                                                                             |
| token\_ownerships                    | Replace with current\_token\_ownerships\_v2                                                                                                                        |
| tokens                              | Replace with current\_token\_datas\_v2                                                                                                                             |
| transactions                        | No replacement; non-realtime data is available in [BigQuery](https://console.cloud.google.com/marketplace/product/bigquery-public-data/crypto-aptos-mainnet-us) |
| transactions\_view                   | No replacement; non-realtime data is available in [BigQuery](https://console.cloud.google.com/marketplace/product/bigquery-public-data/crypto-aptos-mainnet-us) |
